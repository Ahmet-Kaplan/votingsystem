<link href="../polymer/polymer.html" rel="import">
<link href="../paper-dropdown-menu/paper-dropdown-menu.html" rel="import">
<link href="../paper-dropdown/paper-dropdown.html" rel="import">
<link href="../paper-item/paper-item.html" rel="import">
<link href="../core-menu/core-menu.html" rel="import">


<polymer-element name="vs-currency-selector" on-core-select="{{selectAction}}">
    <template>
        <style>
            body /deep/ paper-dropdown-menu.narrow { max-width: 200px; width: 300px; }
            .dropdown.colored::shadow #ripple,
            .dropdown.colored::shadow #background {
                border: 1px solid #0f9d58;
                background-color: #b7e1cd;
            }
        </style>
        <paper-dropdown-menu id="dropDownMenu" valueattr="id" halign="right" style="width: 100px;"
                             on-core-select="{{configGroup}}">
            <paper-dropdown class="dropdown" transition="">
                <core-menu valueattr="id" id="currencySelectorCoreMenu" selected="EUR">
                    <template repeat="{{currencyCodes}}">
                        <paper-item id="{{code}}">{{name}}</paper-item>
                    </template>
                </core-menu>
            </paper-dropdown>
        </paper-dropdown-menu>
    </template>
    <script>
        Polymer('vs-currency-selector', {
            currencyCodes: [
                {name: 'Euro', code: 'EUR'},
                {name: 'Dollar', code: 'USD'},
                {name: 'Yuan', code: 'CNY'},
                {name: 'Yen', code: 'JPY'}],
            ready: function() { console.log(this.tagName + " - ready")},
            getSelected:function() {
                return this.$.currencySelectorCoreMenu.selected
            },
            selectAction: function(e, details) {
                if(details.isSelected) {
                    this.fire("selected", details.item.id)
                    this.fire('core-signal', {name: "vs-currency-selector-selected", data: details.item.id});
                }
            }
        });
    </script>
</polymer-element>
