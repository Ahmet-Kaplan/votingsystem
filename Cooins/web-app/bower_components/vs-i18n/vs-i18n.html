<script src="./messages.js"></script>

<polymer-element name="vs-i18n" attributes="messages">
<template>
</template>
<script>
    Polymer('vs-i18n', {
        publish: {
            messages: {value: {}}
        },
        ready:function() { },
        getMessages:function() {
            var resultMessages
            var results = new RegExp("[\\?&]locale=([^&#]*)").exec(location.search);
            var userLocale = ((results == null) ? "" : decodeURIComponent(results[1].replace(/\+/g, " "))) || navigator.language
            if(this.messages[userLocale]) resultMessages = messages_i18n[userLocale]
            else resultMessages = messages_i18n['es']
            console.log(this.tagName + " loaded locales for: " + userLocale)
            return resultMessages
        }
    });
</script>
</polymer-element>